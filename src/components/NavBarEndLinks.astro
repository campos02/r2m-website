---
import {actions} from "astro:actions";
import {fetchWithCache} from '../fetchWithCache.js';

const token = Astro.cookies.get('user_token').value;
const backendName = import.meta.env.PUBLIC_BACKEND_NAME;

const data = await fetchWithCache(`https://${backendName}/_r2m/user`, {
    headers: {
        Authorization: `Bearer ${token}`
    }
});
---
<div class="end-links">
    <a href="/user">{data.display_name}</a>
    <a href="/logout">Logout</a>
</div>
<style>
    a {
        text-decoration: none;
        color: light-dark(var(--actions-text-color), var(--actions-text-color-dark));
    }

    a:hover {
        color: light-dark(var(--actions-hover-color), var(--actions-hover-color-dark));
    }

    .end-links {
        place-self: end;
        display: flex;
        gap: 2rem;
    }

    @media (max-width: 530px) {
        .end-links {
            place-self: center;
            display: grid;
            gap: 1rem;
            margin: 0;
        }
    }
</style>